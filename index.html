<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Maker</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
        .no-print { background: white; padding: 20px; border: 2px solid #333; border-radius: 10px; margin-bottom: 20px; }
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ccc; font-size: 16px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; font-weight: bold; cursor: pointer; border-radius: 5px; border: none; font-size: 16px; }
        .green-btn { background: #28a745; color: white; margin-bottom: 10px; }
        .red-btn { background: #dc3545; color: white; margin-top: 20px; }
        .blue-btn { background: #007bff; color: white; margin-top: 10px; }
        
        #invoice { background: white; padding: 30px; border: 1px solid #ddd; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        .total { text-align: right; font-size: 20px; font-weight: bold; margin-top: 15px; }
        .del { color: red; cursor: pointer; font-weight: bold; border: none; background: none; }
        @media print { .no-print { display: none; } #invoice { border: none; } }
    </style>
</head>
<body>

<div class="no-print">
    <h3>Add Invoice Line</h3>
    <label>Description:</label>
    <input type="text" id="descInput" placeholder="e.g. TRIPS 1/1 TO 5/1">
    
    <label>Amount ($):</label>
    <input type="number" id="priceInput" placeholder="0.00">
    
    <button class="green-btn" onclick="addItem()">ADD LINE</button>
    <button class="blue-btn" onclick="window.print()">PRINT / SAVE PDF</button>
    <button class="red-btn" onclick="clearData()">CLEAR EVERYTHING</button>
</div>

<div id="invoice">
    <h1 style="margin:0">INVOICE</h1>
    <p><strong>Taxi Trips</strong> | ABN: 15 685 270 239</p>
    <p><strong>Bill To:</strong> Keqin Dai</p>
    
    <table>
        <thead>
            <tr>
                <th>Description</th>
                <th style="width:100px">Amount</th>
                <th class="no-print" style="width:50px">X</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>
    
    <div class="total">Total: $<span id="grandTotal">0.00</span></div>
</div>

<script>
    // LOAD SAVED DATA
    var saved = localStorage.getItem('taxiData');
    var items = saved ? JSON.parse(saved) : [];
    refreshTable();

    function addItem() {
        var d = document.getElementById('descInput').value;
        var p = document.getElementById('priceInput').value;
        
        if(d !== "" && p !== "") {
            items.push({ d: d.toUpperCase(), p: parseFloat(p) });
            saveAndRefresh();
            document.getElementById('descInput').value = "";
            document.getElementById('priceInput').value = "";
        }
    }

    function deleteItem(index) {
        items.splice(index, 1);
        saveAndRefresh();
    }

    function clearData() {
        if(confirm("Delete all rows?")) {
            items = [];
            saveAndRefresh();
        }
    }

    function saveAndRefresh() {
        localStorage.setItem('taxiData', JSON.stringify(items));
        refreshTable();
    }

    function refreshTable() {
        var html = "";
        var total = 0;
        for(var i=0; i < items.length; i++) {
            total += items[i].p;
            html += "<tr>" +
                    "<td>" + items[i].d + "</td>" +
                    "<td>$" + items[i].p.toFixed(2) + "</td>" +
                    "<td class='no-print'><button class='del' onclick='deleteItem("+i+")'>DEL</button></td>" +
                    "</tr>";
        }
        document.getElementById('tableBody').innerHTML = html;
        document.getElementById('grandTotal').innerText = total.toFixed(2);
    }
</script>

</body>
</html>